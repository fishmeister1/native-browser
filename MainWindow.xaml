<Window x:Class="NativeBrowser.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="Native Browser" 
        Height="800" 
        Width="1200"
        MinHeight="400"
        MinWidth="600"
        WindowStyle="None" 
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResize">
    
    <Border Background="{StaticResource WindowBackgroundBrush}" 
            BorderBrush="{StaticResource WindowBorderBrush}" 
            BorderThickness="1"
            CornerRadius="8">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/> <!-- Title Bar -->
                <RowDefinition Height="*"/> <!-- Content Area -->
            </Grid.RowDefinitions>
            
            <!-- Custom Title Bar -->
            <Grid Grid.Row="0" Background="{StaticResource TitleBarBackgroundBrush}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="40"/> <!-- App Icon -->
                    <ColumnDefinition Width="*"/>  <!-- Title -->
                    <ColumnDefinition Width="Auto"/> <!-- Window Controls -->
                </Grid.ColumnDefinitions>
                
                <!-- App Icon -->
                <Image Grid.Column="0" 
                       Source="Assets/icon.ico" 
                       Width="20" 
                       Height="20" 
                       Margin="10,0,0,0"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Left"/>
                
                <!-- Tab Container -->
                <StackPanel Grid.Column="1" 
                           Orientation="Horizontal"
                           x:Name="TabContainer"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Margin="10,0,0,0">
                    
                    <!-- Default tab -->
                    <Button Content="Google"
                           Style="{StaticResource TabItemStyle}"
                           Tag="Active"
                           x:Name="DefaultTab"
                           Click="Tab_Click"/>
                    
                    <!-- New tab button -->
                    <Button Style="{StaticResource NewTabButtonStyle}"
                           x:Name="NewTabButton"
                           ToolTip="New Tab"
                           Click="NewTab_Click"/>
                </StackPanel>
                
                <!-- Window Control Buttons -->
                <StackPanel Grid.Column="2" 
                           Orientation="Horizontal" 
                           HorizontalAlignment="Right">
                    
                    <!-- Minimize Button -->
                    <Button x:Name="MinimizeButton"
                            Style="{StaticResource WindowControlButtonStyle}"
                            Click="MinimizeButton_Click"
                            ToolTip="Minimize">
                        <Path Data="M0,6 L10,6" 
                              Stroke="{StaticResource ControlButtonForegroundBrush}" 
                              StrokeThickness="2"/>
                    </Button>
                    
                    <!-- Maximize/Restore Button -->
                    <Button x:Name="MaximizeButton"
                            Style="{StaticResource WindowControlButtonStyle}"
                            Click="MaximizeButton_Click"
                            ToolTip="Maximize">
                        <Path x:Name="MaximizeIcon"
                              Data="M0,2 L0,10 L8,10 L8,2 Z M0,2 L8,2"
                              Stroke="{StaticResource ControlButtonForegroundBrush}" 
                              StrokeThickness="1.5" 
                              Fill="Transparent"/>
                    </Button>
                    
                    <!-- Close Button -->
                    <Button x:Name="CloseButton"
                            Style="{StaticResource CloseButtonStyle}"
                            Click="CloseButton_Click"
                            ToolTip="Close">
                        <Path Data="M1,1 L9,9 M9,1 L1,9" 
                              Stroke="{StaticResource ControlButtonForegroundBrush}" 
                              StrokeThickness="1.5"/>
                    </Button>
                </StackPanel>
            </Grid>
            
            <!-- Main Content Area -->
            <Grid Grid.Row="1" Background="{StaticResource ContentBackgroundBrush}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="60"/> <!-- Navigation Bar -->
                    <RowDefinition Height="*"/> <!-- Browser Content -->
                    <RowDefinition Height="25"/> <!-- Status Bar -->
                </Grid.RowDefinitions>
                
                <!-- Navigation Bar -->
                <Grid Grid.Row="0" Background="{StaticResource NavigationBarBackgroundBrush}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Back Button -->
                    <Button Grid.Column="0" 
                            Style="{StaticResource NavigationButtonStyle}"
                            x:Name="BackButton"
                            ToolTip="Back"
                            Margin="10,15,5,15"
                            Click="BackButton_Click">
                        <Path Data="M6,2 L2,6 L6,10" 
                              Stroke="{StaticResource NavigationButtonForegroundBrush}" 
                              StrokeThickness="2"
                              Fill="Transparent"/>
                    </Button>
                    
                    <!-- Forward Button -->
                    <Button Grid.Column="1" 
                            Style="{StaticResource NavigationButtonStyle}"
                            x:Name="ForwardButton"
                            ToolTip="Forward"
                            Margin="5,15,5,15"
                            Click="ForwardButton_Click">
                        <Path Data="M2,2 L6,6 L2,10" 
                              Stroke="{StaticResource NavigationButtonForegroundBrush}" 
                              StrokeThickness="2"
                              Fill="Transparent"/>
                    </Button>
                    
                    <!-- Refresh Button -->
                    <Button Grid.Column="2" 
                            Style="{StaticResource NavigationButtonStyle}"
                            x:Name="RefreshButton"
                            ToolTip="Refresh"
                            Margin="5,15,10,15"
                            Click="RefreshButton_Click">
                        <Path Data="M8,2 A6,6 0 1,1 2,8" 
                              Stroke="{StaticResource NavigationButtonForegroundBrush}" 
                              StrokeThickness="2"
                              Fill="Transparent"/>
                    </Button>
                    
                    <!-- Address Bar -->
                    <TextBox Grid.Column="3"
                             x:Name="AddressBar"
                             Style="{StaticResource AddressBarStyle}"
                             Text="https://opticaai.org/"
                             Margin="10,13,10,13"
                             KeyDown="AddressBar_KeyDown"/>
                    
                    <!-- Menu Button -->
                    <Button Grid.Column="4"
                            Style="{StaticResource NavigationButtonStyle}"
                            x:Name="MenuButton"
                            ToolTip="Menu"
                            Margin="10,15,10,15"
                            Click="MenuButton_Click">
                        <StackPanel>
                            <Rectangle Height="2" Width="12" Fill="{StaticResource NavigationButtonForegroundBrush}" Margin="0,1"/>
                            <Rectangle Height="2" Width="12" Fill="{StaticResource NavigationButtonForegroundBrush}" Margin="0,1"/>
                            <Rectangle Height="2" Width="12" Fill="{StaticResource NavigationButtonForegroundBrush}" Margin="0,1"/>
                        </StackPanel>
                    </Button>
                </Grid>
                
                <!-- Browser Content -->
                <Border Grid.Row="1" 
                        x:Name="WebViewContainer"
                        Background="{StaticResource BrowserContentBackgroundBrush}"
                        Margin="2">
                    <wv2:WebView2 x:Name="WebView"
                                 Source="https://opticaai.org/"
                                 NavigationCompleted="WebView_NavigationCompleted"
                                 NavigationStarting="WebView_NavigationStarting"/>
                </Border>
                
                <!-- Status Bar -->
                <Grid Grid.Row="2" Background="{StaticResource StatusBarBackgroundBrush}">
                    <TextBlock Text="Ready"
                              Foreground="{StaticResource StatusBarForegroundBrush}"
                              FontSize="11"
                              VerticalAlignment="Center"
                              Margin="10,0"
                              x:Name="StatusText"/>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>